function initialize(){M.Tabs.init(document.querySelectorAll(".tabs"),{}),M.Collapsible.init(document.querySelector(".collapsible"),{}),fetch("fragment/classlist.html?ver=1").then(function(e){return e.text()}).then(function(e){document.querySelector("#classlist").innerHTML=e})}function doSearch(){document.getElementById("searchTxt").innerHTML='<i class="material-icons left searchIcon">details</i>Searching';var e=document.getElementById("tableBody"),t=document.getElementById("headIntake"),n=document.getElementById("headModule");t.removeAttribute("style"),n.removeAttribute("style"),e.innerHTML="";var o=document.getElementById("emptyInfo");o.style.display="none";var l=document.querySelector(".emptyClass").checked?"on":"",a=document.getElementById("searchInfo"),d=document.getElementById("resultArea"),i=document.getElementById("tutorial"),s=document.querySelector(".dateDay:checked").value,c=document.getElementById("hidemsg"),r=document.getElementById("searchVal").value;navigator.onLine?postMe("control/logic.php","classroom="+r+"&date="+s+"&emptyClass="+l).then(function(l){"empty"==l[0].method||"invalid"==l[0].method||"noinput"==l[0].method?(i.style.display="none",d.style.display="none",c.style.display="none",a.innerHTML=r+" seems "+l[0].method+" on "+s):(i.style.display="none",d.removeAttribute("style"),c.removeAttribute("style"),a.style.display="block",a.innerHTML="Results for "+r+" on "+s,d.removeAttribute("style"),l.forEach(function(l){"emptyclassroom"==l.method?(t.style.display="none",n.style.display="none",e.innerHTML+='<tr><td class="hide-on-small-only">'+l.date+"</td><td>"+l.time+"</td><td>"+l.classroom+"</td><td>"+l.lecturer+"</td></tr>","emptyNow"==l.status?o.style.display="block":o.style.display="none"):e.innerHTML+="<tr><td>"+l.intake+'</td><td class="hide-on-small-only">'+l.date+"</td><td>"+l.time+"</td><td>"+l.classroom+"</td><td>"+l.module+"</td><td>"+l.lecturer+"</td></tr>"}),d.classList.add("tableInAnim")),document.getElementById("searchTxt").innerHTML='<i class="material-icons left">lightbulb_outline</i>Search'}):(M.toast({html:"You are offline!",displayLength:"5000"}),i.style.display="none",a.innerHTML='<i class="material-icons left">portable_wifi_off</i><h5>No internet connection</h5>')}function changemytimetable(){navigator.onLine||M.toast({html:"You are offline!",displayLength:"5000"}),changeTab("brown darken-4","#3e2723")}function hidethead(){var e=document.getElementById("tableHead");"none"===e.style.display?(e.style.display="block",document.cookie="apuschedule-tablehead=;expires=Thu, 01 Jan 1970 00:00:00 UTC;"):(e.style.display="none",document.cookie="apuschedule-tablehead=hidden;expires=Mon, 31 Dec 2018 20:00:00 UTC; path=/;")}function postMe(e,t){return new Promise(function(n,o){var l=new XMLHttpRequest;l.onload=function(){n(JSON.parse(this.responseText))},l.onerror=o,l.open("POST",e),l.setRequestHeader("Content-type","application/x-www-form-urlencoded"),l.setRequestHeader("Accept","application/json"),l.send(t)})}function changeTab(e,t){document.getElementById("headercolor").className="nav-extended "+e,document.querySelector("meta[name=theme-color]").setAttribute("content",t)}window.addEventListener?window.addEventListener("load",initialize,!1):window.attachEvent?window.attachEvent("onload",initialize):window.onload=initialize,document.getElementById("searchVal").addEventListener("keyup",function(e){e.preventDefault(),13===e.keyCode&&doSearch()});

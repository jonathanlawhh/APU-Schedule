function initialize(){M.Tabs.init(document.querySelectorAll(".tabs"),{}),fetch("fragment/classlist.html?ver=1").then(function(e){return e.text()}).then(function(e){document.querySelector("#classlist").innerHTML=e})}function doSearch(){var e=document.getElementById("tableBody"),t=document.getElementById("headIntake"),n=document.getElementById("headModule");t.removeAttribute("style"),n.removeAttribute("style"),e.innerHTML="";var o=document.getElementById("emptyInfo");o.style.display="none";var d=document.querySelector(".emptyClass").checked?"on":"",l=document.getElementById("searchInfo"),a=document.getElementById("resultArea"),i=document.getElementById("tutorial"),r=document.querySelector(".dateDay:checked").value,s=document.getElementById("hidemsg"),c=document.getElementById("searchVal").value;navigator.onLine?postMe("control/logic.php","classroom="+c+"&date="+r+"&emptyClass="+d).then(function(d){"empty"==d[0].method||"invalid"==d[0].method||"noinput"==d[0].method?(i.style.display="none",a.style.display="none",s.style.display="none",l.innerHTML=c+" seems "+d[0].method+" on "+r):(i.style.display="none",a.removeAttribute("style"),s.removeAttribute("style"),l.style.display="block",l.innerHTML="Results for "+c+" on "+r,a.removeAttribute("style"),d.forEach(function(d){"emptyclassroom"==d.method?(t.style.display="none",n.style.display="none",e.innerHTML+='<tr><td class="hide-on-small-only">'+d.date+"</td><td>"+d.time+"</td><td>"+d.classroom+"</td><td>"+d.lecturer+"</td></tr>","emptyNow"==d.status?o.style.display="block":o.style.display="none"):e.innerHTML+="<tr><td>"+d.intake+'</td><td class="hide-on-small-only">'+d.date+"</td><td>"+d.time+"</td><td>"+d.classroom+"</td><td>"+d.module+"</td><td>"+d.lecturer+"</td></tr>"}),a.classList.add("tableInAnim"))}):(i.style.display="none",l.innerHTML='<i class="material-icons left">portable_wifi_off</i><h5>No internet connection</h5>')}function changemytimetable(){if(navigator.onLine){if(!document.getElementById("timetableContent")){var e=new XMLHttpRequest;e.open("POST","control/mytimetable.php",!0),e.setRequestHeader("Content-type","application/x-www-form-urlencoded"),e.send("intake=load"),e.onreadystatechange=function(){document.getElementById("mytimetable").innerHTML=e.responseText,M.Collapsible.init(document.querySelector(".collapsible"),{})}}}else fetch("control/mytimetable.php").then(function(e){return e.text()}).then(function(e){document.querySelector("#mytimetable").innerHTML=e});document.getElementById("headercolor").className="nav-extended brown darken-4",document.querySelector("meta[name=theme-color]").setAttribute("content","#3e2723")}function warning(){document.getElementById("headercolor").className="nav-extended red darken-3",document.getElementById("btn_all").className="waves-effect waves-light btn col s4 m2 l2 red darken-1",document.querySelector("meta[name=theme-color]").setAttribute("content","#b71c1c")}function hidethead(){var e=document.getElementById("tableHead");"none"===e.style.display?(e.style.display="block",document.cookie="apuschedule-tablehead=;expires=Thu, 01 Jan 1970 00:00:00 UTC;"):(e.style.display="none",document.cookie="apuschedule-tablehead=hidden;expires=Mon, 31 Dec 2018 20:00:00 UTC; path=/;")}function getCurTimetable(e){var t=document.getElementById(e);document.getElementById(e+"Data")||(t.innerHTML="<div class='progress brown lighten-5'><div class='indeterminate brown darken-2'></div></div>",postMe("control/logic.php","classroom=takeIntakeCode&date="+e+"&method=intakeTimetable").then(function(n){t.innerHTML="",n.forEach(function(n){t.innerHTML+='<tr id="'+e+'Data"><td>'+n.time+"</td><td>"+n.classroom+"</td><td>"+n.module+"</td><td>"+n.lecturer+"</td></tr>"})}))}function postMe(e,t){return new Promise(function(n,o){var d=new XMLHttpRequest;d.onload=function(){n(JSON.parse(this.responseText))},d.onerror=o,d.open("POST",e),d.setRequestHeader("Content-type","application/x-www-form-urlencoded"),d.setRequestHeader("Accept","application/json"),d.send(t)})}window.addEventListener?window.addEventListener("load",initialize,!1):window.attachEvent?window.attachEvent("onload",initialize):window.onload=initialize,document.getElementById("searchVal").addEventListener("keyup",function(e){e.preventDefault(),13===e.keyCode&&doSearch()});
